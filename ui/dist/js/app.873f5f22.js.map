{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/GameFormField.vue?e52c","webpack:///./src/GameForm.vue?3d32","webpack:///./src/RecordingPlayer.vue?f4eb","webpack:///./src/App.vue?9d38","webpack:///./src/Navbar.vue?445d","webpack:///./src/event-bus.ts","webpack:///./src/Navbar.vue?0062","webpack:///./src/Navbar.vue?f3f6","webpack:///./src/Navbar.vue","webpack:///./src/App.vue?ec60","webpack:///./src/App.vue?640d","webpack:///./src/App.vue","webpack:///./src/Root.vue?1cfc","webpack:///./src/Map.vue?661b","webpack:///./src/Help.vue?8491","webpack:///./src/Help.vue?ea69","webpack:///./src/Help.vue?4153","webpack:///./src/Help.vue","webpack:///./src/utils.ts","webpack:///./src/ebird.ts","webpack:///./src/Map.vue?59bd","webpack:///./src/types.ts","webpack:///./src/Map.vue?2026","webpack:///./src/Map.vue","webpack:///./src/Root.vue?5660","webpack:///./src/Root.vue?5f2c","webpack:///./src/Root.vue","webpack:///./src/GameRoot.vue?c574","webpack:///./src/ControlPanel.vue?5675","webpack:///./src/NamesSelector.vue?bf4b","webpack:///./src/NamesSelector.vue?f85c","webpack:///./src/NamesSelector.vue?9f79","webpack:///./src/NamesSelector.vue","webpack:///./src/ControlPanel.vue?e067","webpack:///./src/ControlPanel.vue?a9af","webpack:///./src/ControlPanel.vue","webpack:///./src/Game.vue?502c","webpack:///./src/xeno-canto.ts","webpack:///./src/birds.ts","webpack:///./src/RecordingPlayer.vue?78f7","webpack:///./src/RecordingPlayer.vue?e254","webpack:///./src/RecordingPlayer.vue?09a3","webpack:///./src/RecordingPlayer.vue","webpack:///./src/GameForm.vue?e906","webpack:///./src/GameFormField.vue?e3de","webpack:///./src/GameFormField.vue?ee2e","webpack:///./src/GameFormField.vue?d725","webpack:///./src/GameFormField.vue","webpack:///./src/GameFormFieldContainer.vue?372c","webpack:///./src/GameFormFieldContainer.vue?7af1","webpack:///./src/GameFormFieldContainer.vue?aef3","webpack:///./src/GameFormFieldContainer.vue","webpack:///./src/GameForm.vue?7ebb","webpack:///./src/GameForm.vue?4718","webpack:///./src/GameForm.vue","webpack:///./src/RevealArea.vue?5c67","webpack:///./src/RevealArea.vue?7f55","webpack:///./src/RevealArea.vue?6742","webpack:///./src/RevealArea.vue","webpack:///./src/ChallengeDescription.vue?b55c","webpack:///./src/FamilySelector.vue?f6a9","webpack:///./src/FamilySelector.vue?a81c","webpack:///./src/FamilySelector.vue?15cd","webpack:///./src/FamilySelector.vue","webpack:///./src/ChallengeDescription.vue?af99","webpack:///./src/ChallengeDescription.vue?0d37","webpack:///./src/ChallengeDescription.vue","webpack:///./src/ChallengeControls.vue?7ded","webpack:///./src/ChallengeControls.vue?ad77","webpack:///./src/ChallengeControls.vue?380c","webpack:///./src/ChallengeControls.vue","webpack:///./src/Game.vue?d313","webpack:///./src/Game.vue?59cb","webpack:///./src/Game.vue","webpack:///./src/GameRoot.vue?c157","webpack:///./src/GameRoot.vue?9b19","webpack:///./src/GameRoot.vue","webpack:///./src/main.ts","webpack:///./src/ControlPanel.vue?6b2e"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","_vm","this","_h","$createElement","_c","_self","staticClass","staticRenderFns","slot","attrs","on","showHelp","_v","showControlPanel","eventBus","extend","methods","$emit","component","components","Navbar","model","callback","$$v","expression","_b","staticStyle","center","showCoordinatesPopup","map","tileLayer","_l","hotspot","id","lat","lng","hotspotProps","$router","_s","locName","popup","latlng","toFixed","_e","isLoading","_m","fetchMultipleJSON","urls","Promise","allSettled","url","fetch","then","resp","json","catch","error","console","log","settledPromises","filter","status","transformTaxonName","replace","toLowerCase","debug","msg","force","ebirdSpecies","getGenus","species","sciName","split","getSpeciesSciSp","getSpeciesSci","getSpeciesEn","comName","getFamilyEn","familyComName","getFamilySci","familySciName","fetchLocationSpecies","locIds","locId","speciesCodes","union","join","fetchRecentObservations","observations","flatten","fetchEbirdHotspots","fetchEbirdHotspotsByLatLng","response","fetchSpeciesImages","speciesString","sp","cachedSpeciesImages","remainingSpeciesNames","difference","si","fetchSpeciesImagesParallel","remainingSpeciesImages","concat","use","NamesLanguage","Help","LMap","LTileLayer","LCircle","LMarker","LPopup","LLayerGroup","props","Array","zoom","tap","color","fillOpacity","radius","ebirdHotspots","mounted","$on","event","finally","MapComponent","ebirdHotSpots","controlPanelOpen","settings","locationRequest","open","sidebarAttributes","newSettings","$set","English","names","Scientific","Both","watch","newVal","NamesSelector","assign","overlay","fullheight","fullwidth","right","ebirdLocIds","locationSpecies","challengeRecordings","challengeFamilies","image","recording","setNextRecording","ref","imageURLMaps","$refs","gameForm","speciesEnField","isCorrect","speciesSciField","recordings","fetchAllRecordings","sppecies","fetchCachedRecordings","Set","keys","remainingSpecies","has","all","fetchRecordings","remainingRecordings","zip","recs","set","fetchXenoCantoRecordings","query","encodeURIComponent","text","JSON","parse","makeQuery","locations","genus","speciesSci","countryCodes","loc","countryCode","size","country","getCountry","xcRecs","x","makeRecording","name2EbirdSpecies","Map","fetchCachedXenoCantoRecording","sp2xcRecs","entries","query2species","doc","xcRec","familySci","familyEn","speciesEn","file","raw","isSong","type","words","isDefaultSelectedFamily","family","family2order","nonPasserineDefaultSelectedFamilies","preload","ev","target","play","$event","String","default","useFieldModals","isModal","scopedSlots","_u","fn","answer","handleFamilySci","shouldShowScientificNames","filterFamilySci","truth","getFamilySciImageURLs","shouldShowEnglishNames","proxy","handleFamilyEn","filterFamilyEn","getFamilyEnImageURLs","handleGenus","filterGenus","getGenusImageURLs","handleSpeciesSci","filterSpeciesSci","getSpeciesSciImageURLs","handleSpeciesEn","filterSpeciesEn","getSpeciesEnImageURLs","label","filteredCandidates","handleSelect","option","getImageURLs","clear","reveal","initial","shouldShow","Boolean","Function","handler","dismissMobileKeyboardOnDropdownScroll","computed","stringify","sync","styleInputAccordingToAnswer","autocomplete","input","classList","remove","add","dropdown","dropdownContent","querySelector","onscroll","blur","_t","GameFormFieldContainer","GameFormField","familyEn2Sci","familySci2En","genus2familySci","speciesSci2genus","speciesSci2En","speciesEn2Sci","familySciField","familyEnField","genusField","promptIncludesImages","_getImageURLs","speciesSciName2images","genus2images","familySci2images","familyEn2images","imageURLMap","images","delete","from","_filter","isFamilySciMatch","isFamilyEnMatch","isGenusMatch","isSpeciesSciMatch","isSpeciesEnMatch","matchFn","mapFn","uniq","_startsWith","_includes","includes","startsWith","recordingSpeciesWikipediaURL","recordingSpeciesSciName","promptIncludesRecording","active","rec","RecordingPlayer","h","isFamilyModalActive","selected","val","selectFamily","FamilySelector","cnt","also","makeRecordingsIterator","GameForm","RevealArea","ChallengeDescription","ChallengeControls","speciesCode2SciName","species2familySci","species2familyEn","commonSpecies","recentObservations","selectedFamilies","speciesImages","makeImageURLMaps","challengeRecordingsIterator","haveLocationData","challengeActive","created","fetchLocationData","speciesCode","obs","makeChallengeFamilies","setChallengeRecordings","handleFamilySelection","deep","_newVal","makeChallengeRecordings","challengeFamily","ebirdLocId","resolve","shuffle","makeSpeciesRecordingsIterator","recordingMatchesFilters","f","songsOnly","gen","commonSpeciesOnly","next","done","alert","values","challengeSpecies","order","groupBy","spp","species2images","obj","haveSeenGenus","ControlPanel","Game","config","productionTip","defaultIconPack","defaultContainerElement","routes","path","Root","GameRoot","route","location","coords","zipObject","router","render","App","$mount"],"mappings":"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","file":"js/app.873f5f22.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./GameFormField.vue?vue&type=style&index=0&id=d90261de&scoped=true&lang=css&\"","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./GameForm.vue?vue&type=style&index=0&id=7105fc83&scoped=true&lang=css&\"","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./RecordingPlayer.vue?vue&type=style&index=0&id=1f3d053c&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[_c('navbar'),_c('router-view')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-navbar',[_c('template',{slot:\"brand\"},[_c('b-navbar-item',[_c('router-link',{attrs:{\"to\":\"/trogon\"}},[_c('img',{attrs:{\"src\":\"https://upload.wikimedia.org/wikipedia/commons/thumb/8/87/Trogon_collaris_%28Trog%C3%B3n_collarejo%29_%2814027165535%29.jpg/320px-Trogon_collaris_%28Trog%C3%B3n_collarejo%29_%2814027165535%29.jpg\",\"alt\":\"Trogon\"}})])],1),_c('b-navbar-item',{attrs:{\"tag\":\"div\"}},[_c('router-link',{attrs:{\"to\":\"/trogon\"}},[_c('i',{staticClass:\"fas fa-globe-americas\"})])],1),_c('b-navbar-item',{attrs:{\"href\":\"#\"},on:{\"click\":_vm.showHelp}},[_vm._v(\" Help \")])],1),_c('template',{slot:\"end\"},[_c('b-navbar-item',{attrs:{\"href\":\"#\"},on:{\"click\":_vm.showControlPanel}},[_c('i',{staticClass:\"fas fa-cog\"})]),_c('b-navbar-item',{attrs:{\"href\":\"https://github.com/dandavison/trogon\"}},[_c('i',{staticClass:\"fab fa-github\"})])],1)],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import Vue from \"vue\";\nconst eventBus = new Vue();\nexport default eventBus;\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\nimport eventBus from \"./event-bus\";\n\nexport default Vue.extend({\n  methods: {\n    showControlPanel(): void {\n      eventBus.$emit(\"control-panel:show\");\n    },\n\n    showHelp(): void {\n      eventBus.$emit(\"show:help\");\n    }\n  }\n});\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??ref--13-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./Navbar.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??ref--13-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./Navbar.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Navbar.vue?vue&type=template&id=71bc2d4e&\"\nimport script from \"./Navbar.vue?vue&type=script&lang=ts&\"\nexport * from \"./Navbar.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\nimport Vue from \"vue\";\nimport Navbar from \"./Navbar.vue\";\n\nexport default Vue.extend({\n  components: { Navbar }\n});\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??ref--13-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??ref--13-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=7398493b&\"\nimport script from \"./App.vue?vue&type=script&lang=ts&\"\nexport * from \"./App.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',[_c('map-component',{attrs:{\"center\":[0.0, 0.0]}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[(!_vm.showHelp)?_c('l-map',_vm._b({staticStyle:{\"height\":\"800px\"},attrs:{\"center\":_vm.center},on:{\"contextmenu\":_vm.showCoordinatesPopup}},'l-map',_vm.map,false),[_c('l-tile-layer',_vm._b({},'l-tile-layer',_vm.tileLayer,false)),_vm._l((_vm.ebirdHotspots),function(hotspot){return _c('l-circle',_vm._b({key:hotspot.id,attrs:{\"lat-lng\":[hotspot.lat, hotspot.lng]}},'l-circle',_vm.hotspotProps,false),[_c('l-popup',[_c('b-button',{staticClass:\"is-success is-light\",on:{\"click\":function () { return _vm.$router.push((\"/challenge?location=\" + (hotspot.locId))); }}},[_vm._v(\" \"+_vm._s(hotspot.locName)+\" \")])],1)],1)}),(_vm.popup.latlng)?_c('l-marker',{attrs:{\"latLng\":_vm.popup.latlng}},[_c('l-popup',[_c('b-button',{staticClass:\"is-success is-light\",on:{\"click\":function () { return _vm.$router.push(\n                (\"/challenge?coords=\" + (_vm.popup.latlng.lat.toFixed(\n                  2\n                )) + \",\" + (_vm.popup.latlng.lng.toFixed(2)))\n              ); }}},[_vm._v(\" (\"+_vm._s(_vm.popup.latlng.lat.toFixed(2))+\", \"+_vm._s(_vm.popup.latlng.lng.toFixed(2))+\") \")])],1)],1):_vm._e(),_c('b-loading',{model:{value:(_vm.isLoading),callback:function ($$v) {_vm.isLoading=$$v},expression:\"isLoading\"}})],2):_c('b-modal',{model:{value:(_vm.showHelp),callback:function ($$v) {_vm.showHelp=$$v},expression:\"showHelp\"}},[_c('help')],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"section has-text-grey-light\"},[_vm._m(0),_vm._m(1),_c('div',{staticClass:\"p-3\"},[_vm._v(\" Feedback appreciated! Please send comments, suggestions, etc to \"),_c('tt',[_vm._v(\"dandavison7@gmail.com\")]),_vm._v(\", or \"),_c('a',{attrs:{\"href\":\"https://github.com/dandavison/trogon/issues\"}},[_vm._v(\"open an issue\")]),_vm._v(\" on the Github page. \")],1),_vm._m(2)])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"p-3\"},[_c('em',[_vm._v(\"Trogon\")]),_vm._v(\" is a tool for learning to identify birds. You select a location anywhere in the world on the map, and are taken to an identification challenge (audio or visual) featuring bird species occurring at that location. \")])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"p-3\"},[_vm._v(\" To select a location: \"),_c('ol',{staticClass:\"p-3\"},[_c('li',[_vm._v(\" Zoom in on some area of the world. \")]),_c('li',[_vm._v(\" Right click / long press (phone) to load nearby Ebird locations (red). If no red circles appear then there are no Ebird locations nearby. \")]),_c('li',[_vm._v(\" Click on the map marker, or on an individual Ebird location, to select that location for the identification challenge. \")])])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"p-3\"},[_vm._v(\" The location data comes from \"),_c('a',{attrs:{\"href\":\"http://ebird.org/\"}},[_vm._v(\"Ebird\")]),_vm._v(\", the recordings of vocalisations come from \"),_c('a',{attrs:{\"href\":\"https://www.xeno-canto.org/\"}},[_vm._v(\"xeno-canto\")]),_vm._v(\", and the images come from \"),_c('a',{attrs:{\"href\":\"https://wikipedia.org/\"}},[_vm._v(\"Wikipedia\")]),_vm._v(\". \")])}]\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\nexport default Vue.extend({});\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??ref--13-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./Help.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??ref--13-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./Help.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Help.vue?vue&type=template&id=4e308c6a&\"\nimport script from \"./Help.vue?vue&type=script&lang=ts&\"\nexport * from \"./Help.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export async function fetchMultipleJSON(urls: string[]): Promise<Object[]> {\n  const settledPromises = await Promise.allSettled(\n    urls.map(url =>\n      fetch(url)\n        .then(resp => resp.json())\n        .catch(error => console.log(`Error: fetchJSONParallel: ${error}`))\n    )\n  );\n  return settledPromises\n    .filter(result => result.status === \"fulfilled\")\n    .map((result: any) => result.value);\n}\n\nexport function transformTaxonName(value: string): string {\n  return value.replace(\"-\", \" \").toLowerCase();\n}\n\nexport function debug(msg: string[], force: boolean = false): void {\n  var debug = false;\n  if (debug || force) {\n    console.log.apply(null, msg);\n  }\n}\n","import _ from \"lodash\";\nimport { LatLngLiteral } from \"leaflet\";\n\nimport { fetchMultipleJSON } from \"./utils\";\nimport { EbirdHotspot, EbirdObservation, EbirdSpecies, SpeciesImages } from \"./types\";\n\nexport const ebirdSpecies = {\n  getGenus: function(species: EbirdSpecies): string {\n    return species.sciName.split(\" \")[0] || \"\";\n  },\n  getSpeciesSciSp: function(species: EbirdSpecies): string {\n    return species.sciName.split(\" \")[1] || \"\";\n  },\n  getSpeciesSci: function(species: EbirdSpecies): string {\n    return species.sciName;\n  },\n  getSpeciesEn: function(species: EbirdSpecies): string {\n    return species.comName;\n  },\n  getFamilyEn: function(species: EbirdSpecies): string {\n    return species.familyComName;\n  },\n  getFamilySci: function(species: EbirdSpecies): string {\n    return species.familySciName;\n  }\n};\n\nexport async function fetchLocationSpecies(\n  locIds: string[]\n): Promise<EbirdSpecies[]> {\n  /// Fetch species lists for each location in parallel\n  var speciesCodes = await fetchMultipleJSON(\n    locIds.map(\n      locId =>\n        `${process.env.VUE_APP_SERVER_URL}/proxy/ebird/v2/product/spplist/${locId}?fmt=json`\n    )\n  );\n  speciesCodes = _.union(speciesCodes);\n  console.log(\n    `Fetched ${speciesCodes.length} species codes for locations: ${locIds.join(\n      \",\"\n    )}`\n  );\n  const species = await fetch(\n    `${\n      process.env.VUE_APP_SERVER_URL\n    }/api/ebird-species?species_codes=${speciesCodes.join(\",\")}`\n  ).then(resp => resp.json());\n  console.log(\n    `Fetched ${species.length} EbirdSpecies for ebird locations: ${locIds.join(\n      \",\"\n    )}`\n  );\n  return species;\n}\n\nexport async function fetchRecentObservations(\n  locIds: string[]\n): Promise<EbirdObservation[]> {\n  var observations = (await fetchMultipleJSON(\n    locIds.map(\n      locId =>\n        `${process.env.VUE_APP_SERVER_URL}/proxy/ebird/v2/data/obs/${locId}/recent/?back=30&fmt=json`\n    )\n  )) as EbirdObservation[];\n  return _.union(_.flatten(observations));\n}\n\nexport async function fetchEbirdHotspots(\n  locIds: string[]\n): Promise<EbirdHotspot[]> {\n  return (await fetchMultipleJSON(\n    locIds.map(\n      locId =>\n        `${process.env.VUE_APP_SERVER_URL}/proxy/ebird/v2/ref/hotspot/info/${locId}?fmt=json`\n    )\n  )) as EbirdHotspot[];\n}\n\nexport async function fetchEbirdHotspotsByLatLng(\n  latlng: LatLngLiteral\n): Promise<EbirdHotspot[]> {\n  const response = await fetch(\n    `${process.env.VUE_APP_SERVER_URL}/proxy/ebird/v2/ref/hotspot/geo?lat=${latlng.lat}&lng=${latlng.lng}&fmt=json`\n  );\n  return await response.json();\n}\n\nexport async function fetchSpeciesImages(\n  species: EbirdSpecies[]\n): Promise<SpeciesImages[]> {\n  const speciesString = species.map(sp => sp.sciName).join(\",\");\n  const cachedSpeciesImages: SpeciesImages[] = await fetch(\n    `${process.env.VUE_APP_SERVER_URL}/api/species-image-urls?species=${speciesString}&cached_only=true`\n  ).then(resp => resp.json());\n  const remainingSpeciesNames = _.difference(\n    species.map(ebirdSpecies.getSpeciesSci),\n    cachedSpeciesImages.map(si => si.species)\n  );\n  console.log(\n    `Got ${cachedSpeciesImages.length} cached species images; \\\n    fetching remaining ${remainingSpeciesNames.length}`\n  );\n  // HACK: how to correctly filter to successfully resolved promises only?\n  const remainingSpeciesImages = (\n    await fetchSpeciesImagesParallel(remainingSpeciesNames)\n  )\n    .filter(\n      result =>\n        result.status === \"fulfilled\" && result.value && result.value.urls\n    )\n    .map((result: any) => result.value); // result: PromiseFulfilledResult<SpeciesImages> ?\n\n  return _.concat(cachedSpeciesImages, remainingSpeciesImages);\n}\n\nasync function fetchSpeciesImagesParallel(\n  species: string[]\n): Promise<PromiseSettledResult<SpeciesImages>[]> {\n  return Promise.allSettled(\n    species.map(sp =>\n      fetch(\n        `${process.env.VUE_APP_SERVER_URL}/api/species-image-urls?species=${sp}&cached_only=false`\n      )\n        .then(resp => resp.json())\n        .then(data => data[0])\n        .catch(error =>\n          console.log(`Error: fetchSpeciesImagesParallel: ${error}`)\n        )\n    )\n  );\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue, { PropType } from \"vue\";\nimport Vue2TouchEvents from \"vue2-touch-events\";\nimport VueI18n from \"vue-i18n\";\n\nVue.use(Vue2TouchEvents);\nVue.use(VueI18n);\n\nimport {\n  LMap,\n  LTileLayer,\n  LCircle,\n  LMarker,\n  LPopup,\n  LLayerGroup\n} from \"vue2-leaflet\";\nimport eventBus from \"./event-bus\";\nimport Help from \"./Help.vue\";\nimport { fetchEbirdHotspotsByLatLng } from \"./ebird\";\nimport { LatLngLiteral } from \"leaflet\";\nimport { EbirdHotspot, LeafletMapEvent } from \"./types\";\n\nexport default Vue.extend({\n  components: {\n    Help,\n    LMap,\n    LTileLayer,\n    LCircle,\n    LMarker,\n    LPopup,\n    LLayerGroup\n  },\n  props: {\n    center: Array as PropType<number[]>\n  },\n  data() {\n    return {\n      map: {\n        zoom: 2,\n        tap: true\n      },\n      tileLayer: {\n        url: \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n      },\n      hotspotProps: {\n        color: \"#f03\",\n        fillOpacity: 0.5,\n        radius: 500\n      },\n      popup: {\n        latlng: null as LatLngLiteral | null\n      },\n      ebirdHotspots: [] as EbirdHotspot[],\n      isLoading: false,\n      showHelp: false\n    };\n  },\n\n  mounted: function(): void {\n    eventBus.$on(\"show:help\", () => {\n      this.showHelp = true;\n    });\n  },\n\n  methods: {\n    showCoordinatesPopup(event: LeafletMapEvent): void {\n      this.popup.latlng = event.latlng as any; // TODO\n      if (this.popup.latlng) {\n        this.isLoading = true;\n        fetchEbirdHotspotsByLatLng(this.popup.latlng)\n          .then(data => (this.ebirdHotspots = data))\n          .finally(() => (this.isLoading = false));\n      }\n    }\n  }\n});\n","import { LatLngLiteral } from \"leaflet\";\n\nexport interface Settings {\n  names: NamesLanguage;\n  commonSpeciesOnly: boolean;\n  songsOnly: boolean;\n  promptIncludesImages: boolean;\n  promptIncludesRecording: boolean;\n  useFieldModals: boolean;\n}\n\nexport enum NamesLanguage {\n  Scientific = \"scientific\",\n  English = \"English\",\n  Both = \"both\"\n}\n\nexport interface LocationRequest {\n  ebirdLocId?: string;\n  latlng?: LatLngLiteral;\n}\n\nexport interface EbirdSpecies {\n  sciName: string;\n  comName: string;\n  speciesCode: string;\n  category: string;\n  taxonOrder: number;\n  order: string;\n  familyComName: string;\n  familySciName: string;\n}\n\nexport interface EbirdHotspot {\n  locId: string;\n  locName: string;\n  countryCode: string;\n  subnational1Code: string;\n  lat: number;\n  lng: number;\n  latestObsDt: string | null;\n  numSpeciesAllTime: number | null;\n}\n\nexport interface EbirdObservation {\n  sciName: string;\n  comName: string;\n  speciesCode: string;\n  locId: string;\n  locName: string;\n}\n\nexport interface Recording {\n  url: string;\n  familyEn: string;\n  familySci: string;\n  genus: string;\n  speciesEn: string;\n  speciesSci: string;\n  raw: XenoCantoRecording;\n  [index: string]: string | XenoCantoRecording;\n}\n\nexport interface XenoCantoRecording {\n  file: string;\n  gen: string;\n  sp: string;\n  en: string;\n  type: string;\n  loc: string;\n  cnt: string;\n}\n\nexport interface Answer {\n  familySci: string;\n  familyEn: string;\n  genus: string;\n  speciesSci: string;\n  speciesEn: string;\n  [index: string]: string;\n}\n\nexport interface SpeciesImages {\n  species: string;\n  urls: string[];\n}\n\nexport interface ImageURLMaps {\n  speciesSciName2images: Map<string, Set<string>>;\n  genus2images: Map<string, Set<string>>;\n  familySci2images: Map<string, Set<string>>;\n  familyEn2images: Map<string, Set<string>>;\n}\n\nexport interface ChallengeFamily {\n  n: number;\n  selected: boolean;\n}\n\nexport interface LeafletMapEvent {\n  latlng: LatLngLiteral;\n}\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??ref--13-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./Map.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??ref--13-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./Map.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Map.vue?vue&type=template&id=71e3da4b&\"\nimport script from \"./Map.vue?vue&type=script&lang=ts&\"\nexport * from \"./Map.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\nimport { EbirdHotspot } from \"./types\";\nimport Vue from \"vue\";\n\nimport MapComponent from \"./Map.vue\";\n\nexport default Vue.extend({\n  components: { MapComponent },\n  data() {\n    return {\n      ebirdHotSpots: [] as EbirdHotspot[],\n    };\n  },\n});\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??ref--13-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./Root.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??ref--13-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./Root.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Root.vue?vue&type=template&id=f7eae76e&\"\nimport script from \"./Root.vue?vue&type=script&lang=ts&\"\nexport * from \"./Root.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"section\"},[_c('control-panel',{attrs:{\"open\":_vm.controlPanelOpen,\"settings\":_vm.settings}}),_c('game',{attrs:{\"settings\":_vm.settings,\"locationRequest\":_vm.locationRequest}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',[_c('b-sidebar',_vm._b({attrs:{\"type\":\"is-light\"},model:{value:(_vm.open),callback:function ($$v) {_vm.open=$$v},expression:\"open\"}},'b-sidebar',_vm.sidebarAttributes,false),[_c('div',{staticClass:\"p-1\"},[_c('b-menu',[_c('b-menu-list',[_c('b-menu-item',{staticClass:\"menu-item\",attrs:{\"label\":\"Prompt\"}}),_c('b-switch',{model:{value:(_vm.newSettings.promptIncludesImages),callback:function ($$v) {_vm.$set(_vm.newSettings, \"promptIncludesImages\", $$v)},expression:\"newSettings.promptIncludesImages\"}},[_vm._v(\" Images \")]),_c('b-switch',{model:{value:(_vm.newSettings.promptIncludesRecording),callback:function ($$v) {_vm.$set(_vm.newSettings, \"promptIncludesRecording\", $$v)},expression:\"newSettings.promptIncludesRecording\"}},[_vm._v(\" Audio \")]),_c('b-menu-item',{staticClass:\"menu-item\",attrs:{\"label\":\"Names\"}}),_c('names-selector',{attrs:{\"settings\":_vm.settings}}),_c('b-menu-item',{staticClass:\"menu-item\",attrs:{\"label\":\"Recordings\"}}),_c('b-switch',{model:{value:(_vm.newSettings.commonSpeciesOnly),callback:function ($$v) {_vm.$set(_vm.newSettings, \"commonSpeciesOnly\", $$v)},expression:\"newSettings.commonSpeciesOnly\"}},[_vm._v(\" common species only \")]),_c('b-switch',{model:{value:(_vm.newSettings.songsOnly),callback:function ($$v) {_vm.$set(_vm.newSettings, \"songsOnly\", $$v)},expression:\"newSettings.songsOnly\"}},[_vm._v(\"Songs only\")]),_c('b-menu-item',{staticClass:\"menu-item\",attrs:{\"label\":\"Appearance\"}}),_c('b-switch',{model:{value:(_vm.newSettings.useFieldModals),callback:function ($$v) {_vm.$set(_vm.newSettings, \"useFieldModals\", $$v)},expression:\"newSettings.useFieldModals\"}},[_vm._v(\" Full-screen dropdowns \")])],1)],1)],1)]),_c('div',{staticClass:\"block\"})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"block\"},[_c('ul',[_c('li',[_c('b-radio',{attrs:{\"name\":\"name\",\"native-value\":_vm.NamesLanguage.English},model:{value:(_vm.names),callback:function ($$v) {_vm.names=$$v},expression:\"names\"}},[_vm._v(\" \"+_vm._s(_vm.NamesLanguage.English)+\" \")])],1),_c('li',[_c('b-radio',{attrs:{\"name\":\"name\",\"native-value\":_vm.NamesLanguage.Scientific},model:{value:(_vm.names),callback:function ($$v) {_vm.names=$$v},expression:\"names\"}},[_vm._v(\" \"+_vm._s(_vm.NamesLanguage.Scientific)+\" \")])],1),_c('li',[_c('b-radio',{attrs:{\"name\":\"name\",\"native-value\":_vm.NamesLanguage.Both},model:{value:(_vm.names),callback:function ($$v) {_vm.names=$$v},expression:\"names\"}},[_vm._v(\" \"+_vm._s(_vm.NamesLanguage.Both)+\" \")])],1)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue, { PropType } from \"vue\";\nimport eventBus from \"./event-bus\";\nimport { Settings, NamesLanguage } from \"./types\";\n\nexport default Vue.extend({\n  props: { settings: Object as PropType<Settings> },\n  data() {\n    return {\n      names: this.settings.names,\n      NamesLanguage,\n    };\n  },\n  watch: {\n    names: function (newVal) {\n      eventBus.$emit(\"settings:change:names\", newVal);\n    },\n  },\n});\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??ref--13-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./NamesSelector.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??ref--13-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./NamesSelector.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./NamesSelector.vue?vue&type=template&id=05459d8c&\"\nimport script from \"./NamesSelector.vue?vue&type=script&lang=ts&\"\nexport * from \"./NamesSelector.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue, { PropType } from \"vue\";\nimport eventBus from \"./event-bus\";\nimport NamesSelector from \"./NamesSelector.vue\";\nimport { Settings } from \"./types\";\n\nexport default Vue.extend({\n  components: { NamesSelector },\n  props: { settings: Object as PropType<Settings> },\n  data() {\n    return {\n      newSettings: Object.assign({}, this.settings) as Settings,\n      sidebarAttributes: {\n        overlay: false,\n        fullheight: true,\n        fullwidth: false,\n        right: true,\n      },\n      open: false,\n    };\n  },\n\n  watch: {\n    \"newSettings.commonSpeciesOnly\": function (newVal) {\n      eventBus.$emit(\"settings:change:commonSpeciesOnly\", newVal);\n    },\n    \"newSettings.songsOnly\": function (newVal) {\n      eventBus.$emit(\"settings:change:songsOnly\", newVal);\n    },\n    \"newSettings.promptIncludesImages\": function (newVal) {\n      eventBus.$emit(\"settings:change:promptIncludesImages\", newVal);\n    },\n    \"newSettings.promptIncludesRecording\": function (newVal) {\n      eventBus.$emit(\"settings:change:promptIncludesRecording\", newVal);\n    },\n    \"newSettings.useFieldModals\": function (newVal) {\n      eventBus.$emit(\"settings:change:useFieldModals\", newVal);\n    },\n  },\n\n  mounted: function (): void {\n    eventBus.$on(\"control-panel:show\", () => {\n      this.open = true;\n    });\n  },\n});\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??ref--13-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./ControlPanel.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??ref--13-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./ControlPanel.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./ControlPanel.vue?vue&type=template&id=7eb4310e&scoped=true&\"\nimport script from \"./ControlPanel.vue?vue&type=script&lang=ts&\"\nexport * from \"./ControlPanel.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./ControlPanel.vue?vue&type=style&index=0&id=7eb4310e&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7eb4310e\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',[_c('challenge-description',{attrs:{\"ebirdLocIds\":_vm.ebirdLocIds,\"ebirdHotspots\":_vm.ebirdHotspots,\"locationSpecies\":_vm.locationSpecies,\"challengeRecordings\":_vm.challengeRecordings,\"challengeFamilies\":_vm.challengeFamilies}}),_c('b-loading',{model:{value:(_vm.isLoading),callback:function ($$v) {_vm.isLoading=$$v},expression:\"isLoading\"}}),_c('challenge-controls',{attrs:{\"image\":_vm.image,\"recording\":_vm.recording,\"setNextRecording\":_vm.setNextRecording,\"settings\":_vm.settings}}),(_vm.recording)?_c('game-form',{ref:\"gameForm\",attrs:{\"locationSpecies\":_vm.locationSpecies,\"recording\":_vm.recording,\"image\":_vm.image,\"imageURLMaps\":_vm.imageURLMaps,\"settings\":_vm.settings}}):_vm._e(),(\n      _vm.$refs.gameForm &&\n        (_vm.$refs.gameForm.speciesEnField.isCorrect() ||\n          _vm.$refs.gameForm.speciesSciField.isCorrect())\n    )?_c('reveal-area',{attrs:{\"image\":_vm.image,\"recording\":_vm.recording,\"recordings\":_vm.recordings,\"settings\":_vm.settings}}):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import _ from \"lodash\";\nimport iso3311a2 from \"iso-3166-1-alpha-2\";\nimport { EbirdHotspot, EbirdSpecies, Recording, XenoCantoRecording } from \"./types\";\nimport { ebirdSpecies } from \"./ebird\";\n\nexport async function fetchAllRecordings(\n  sppecies: EbirdSpecies[],\n  ebirdHotspots: EbirdHotspot[]\n): Promise<Map<string, Recording[]>> {\n  var recordings = await fetchCachedRecordings(sppecies, ebirdHotspots);\n  const remainingSpeciesNames = new Set(\n    _.difference(\n      sppecies.map(sp => sp.sciName),\n      [...recordings.keys()]\n    )\n  );\n  const remainingSpecies = sppecies.filter(sp =>\n    remainingSpeciesNames.has(sp.sciName)\n  );\n  const remainingRecordings = await Promise.all(\n    remainingSpecies.map(sp => fetchRecordings(sp, ebirdHotspots))\n  );\n  for (let [sp, recs] of _.zip(remainingSpecies, remainingRecordings) as [\n    EbirdSpecies,\n    Recording[]\n  ][]) {\n    recordings.set(sp.sciName, recs);\n  }\n  return recordings;\n}\n\nasync function fetchXenoCantoRecordings(\n  query: string\n): Promise<XenoCantoRecording[]> {\n  const response = await fetch(\n    `${\n      process.env.VUE_APP_SERVER_URL\n    }/proxy/xeno-canto/2/recordings?query=${encodeURIComponent(query)}`\n  );\n  const text = await response.text();\n  if (text) {\n    return JSON.parse(text).recordings;\n  } else {\n    return [];\n  }\n}\n\nfunction makeQuery(species: EbirdSpecies, locations: EbirdHotspot[]): string {\n  const genus = ebirdSpecies.getGenus(species);\n  const speciesSci = ebirdSpecies.getSpeciesSci(species);\n\n  var query = `${speciesSci}+gen:${genus}`;\n  const countryCodes = new Set(locations.map(loc => loc.countryCode));\n  if (countryCodes.size === 1) {\n    const [countryCode] = countryCodes;\n    const country = iso3311a2.getCountry(countryCode);\n    if (country) {\n      query = `${query}+cnt:\"${country}\"+q:A`;\n    }\n  }\n  return query;\n}\n\nasync function fetchRecordings(\n  species: EbirdSpecies,\n  locations: EbirdHotspot[]\n): Promise<Recording[]> {\n  const query = makeQuery(species, locations);\n  const xcRecs = await fetchXenoCantoRecordings(query);\n  return xcRecs.map(x => makeRecording(x, species));\n}\n\nasync function fetchCachedRecordings(\n  sppecies: EbirdSpecies[],\n  locations: EbirdHotspot[]\n): Promise<Map<string, Recording[]>> {\n  const name2EbirdSpecies = new Map(sppecies.map(sp => [sp.sciName, sp]));\n  return fetchCachedXenoCantoRecording(sppecies, locations).then(\n    sp2xcRecs =>\n      new Map(\n        [...sp2xcRecs.entries()].map(([sp, xcRecs]) => [\n          sp,\n          xcRecs.map(x =>\n            makeRecording(x, name2EbirdSpecies.get(sp) as EbirdSpecies)\n          )\n        ])\n      )\n  );\n}\n\nasync function fetchCachedXenoCantoRecording(\n  sppecies: EbirdSpecies[],\n  locations: EbirdHotspot[]\n): Promise<Map<string, XenoCantoRecording[]>> {\n  const query2species = new Map(\n    sppecies.map(sp => [makeQuery(sp, locations), sp])\n  );\n  const url = `${\n    process.env.VUE_APP_SERVER_URL\n  }/proxy/xeno-canto-cached/2/recordings?queries=${encodeURIComponent(\n    [...query2species.keys()].join(\",\")\n  )}`;\n  return fetch(url)\n    .then(resp => resp.json() as object)\n    .then(\n      doc =>\n        new Map(\n          (_.entries(doc) as [string, string][]).map(([query, doc]) => [\n            query2species.get(query)?.sciName as string,\n            (JSON.parse(doc || \"{}\").recordings || []) as XenoCantoRecording[]\n          ])\n        )\n    );\n}\n\nfunction makeRecording(\n  xcRec: XenoCantoRecording,\n  species: EbirdSpecies\n): Recording {\n  const familySci = ebirdSpecies.getFamilySci(species);\n  const familyEn = ebirdSpecies.getFamilyEn(species);\n  const genus = ebirdSpecies.getGenus(species);\n  const speciesSci = ebirdSpecies.getSpeciesSci(species);\n  const speciesEn = ebirdSpecies.getSpeciesEn(species);\n  return {\n    url: xcRec.file,\n    familySci: familySci,\n    familyEn: familyEn,\n    genus: genus,\n    speciesSci: speciesSci,\n    speciesEn: speciesEn,\n    raw: xcRec\n  };\n}\n\nexport function isSong(type: string): boolean {\n  const words = new Set(type.toLowerCase().split(\" \"));\n  return words.has(\"song\") || words.has(\"duet\");\n}\n","export function isDefaultSelectedFamily(\n  family: string,\n  family2order: Map<string, string>\n): boolean {\n  const nonPasserineDefaultSelectedFamilies = new Set([\n    \"Tinamous\",\n    \"Screamers\",\n    \"Pigeons and Doves\",\n    \"Cuckoos\",\n    \"Trogons\",\n    \"Motmots\",\n    \"Puffbirds\",\n    \"Jacamars\",\n    \"New World Barbets\",\n    \"Toucans\",\n    \"Woodpeckers\"\n  ]);\n  return (\n    family2order.get(family) === \"Passeriformes\" ||\n    nonPasserineDefaultSelectedFamilies.has(family)\n  );\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('audio',{staticClass:\"mt-3\",attrs:{\"controls\":\"\",\"src\":_vm.recording.url,\"preload\":_vm.preload},on:{\"canplaythrough\":function (ev) {\n      ev.target.play();\n    },\"play\":function($event){return _vm.eventBus.$emit('ready:challenge-recording')}}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue, { PropType } from \"vue\";\n\nimport eventBus from \"./event-bus\";\nimport { Recording } from \"./types\";\n\nexport default Vue.extend({\n  props: {\n    recording: Object as PropType<Recording>,\n    preload: { type: String, default: \"metadata\" },\n  },\n  data() {\n    return {\n      eventBus,\n    };\n  },\n});\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??ref--13-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./RecordingPlayer.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??ref--13-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./RecordingPlayer.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./RecordingPlayer.vue?vue&type=template&id=1f3d053c&scoped=true&\"\nimport script from \"./RecordingPlayer.vue?vue&type=script&lang=ts&\"\nexport * from \"./RecordingPlayer.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./RecordingPlayer.vue?vue&type=style&index=0&id=1f3d053c&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1f3d053c\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('form',[_c('game-form-field-container',{attrs:{\"isModal\":_vm.settings.useFieldModals && _vm.isModal.familySci},scopedSlots:_vm._u([{key:\"form-field\",fn:function(){return [_c('game-form-field',{ref:\"familySciField\",attrs:{\"id\":\"familySci\",\"initial\":_vm.answer.familySci,\"handler\":_vm.handleFamilySci,\"shouldShow\":_vm.shouldShowScientificNames,\"filter\":_vm.filterFamilySci,\"truth\":_vm.truth.familySci,\"getImageURLs\":_vm.getFamilySciImageURLs,\"label\":_vm.shouldShowEnglishNames ? 'Family (scientific)' : 'Family'},on:{\"focus\":function($event){_vm.isModal.familySci = true},\"select\":function($event){_vm.isModal.familySci = false}}})]},proxy:true}])}),_c('game-form-field-container',{attrs:{\"isModal\":_vm.settings.useFieldModals && _vm.isModal.familyEn},scopedSlots:_vm._u([{key:\"form-field\",fn:function(){return [_c('game-form-field',{ref:\"familyEnField\",attrs:{\"id\":\"familyEn\",\"initial\":_vm.answer.familyEn,\"handler\":_vm.handleFamilyEn,\"shouldShow\":_vm.shouldShowEnglishNames,\"filter\":_vm.filterFamilyEn,\"truth\":_vm.truth.familyEn,\"getImageURLs\":_vm.getFamilyEnImageURLs,\"label\":_vm.shouldShowScientificNames ? 'Family (English)' : 'Family'},on:{\"focus\":function($event){_vm.isModal.familyEn = true},\"select\":function($event){_vm.isModal.familyEn = false}}})]},proxy:true}])}),_c('game-form-field-container',{attrs:{\"isModal\":_vm.settings.useFieldModals && _vm.isModal.genus},scopedSlots:_vm._u([{key:\"form-field\",fn:function(){return [_c('game-form-field',{ref:\"genusField\",attrs:{\"id\":\"genus\",\"initial\":_vm.answer.genus,\"handler\":_vm.handleGenus,\"shouldShow\":true,\"filter\":_vm.filterGenus,\"truth\":_vm.truth.genus,\"getImageURLs\":_vm.getGenusImageURLs,\"label\":'Genus'},on:{\"focus\":function($event){_vm.isModal.genus = true},\"select\":function($event){_vm.isModal.genus = false}}})]},proxy:true}])}),_c('game-form-field-container',{attrs:{\"isModal\":_vm.settings.useFieldModals && _vm.isModal.speciesSci},scopedSlots:_vm._u([{key:\"form-field\",fn:function(){return [_c('game-form-field',{ref:\"speciesSciField\",attrs:{\"id\":\"speciesSci\",\"initial\":_vm.answer.speciesSci,\"handler\":_vm.handleSpeciesSci,\"shouldShow\":_vm.shouldShowScientificNames,\"filter\":_vm.filterSpeciesSci,\"truth\":_vm.truth.speciesSci,\"getImageURLs\":_vm.getSpeciesSciImageURLs,\"label\":_vm.shouldShowEnglishNames ? 'Species (scientific)' : 'Species'},on:{\"focus\":function($event){_vm.isModal.speciesSci = true},\"select\":function($event){_vm.isModal.speciesSci = false}}})]},proxy:true}])}),_c('game-form-field-container',{attrs:{\"isModal\":_vm.settings.useFieldModals && _vm.isModal.speciesEn},scopedSlots:_vm._u([{key:\"form-field\",fn:function(){return [_c('game-form-field',{ref:\"speciesEnField\",attrs:{\"id\":\"speciesEn\",\"initial\":_vm.answer.speciesEn,\"handler\":_vm.handleSpeciesEn,\"shouldShow\":_vm.shouldShowEnglishNames,\"filter\":_vm.filterSpeciesEn,\"truth\":_vm.truth.speciesEn,\"getImageURLs\":_vm.getSpeciesEnImageURLs,\"label\":_vm.shouldShowScientificNames ? 'Species (English)' : 'Species'},on:{\"focus\":function($event){_vm.isModal.speciesEn = true},\"select\":function($event){_vm.isModal.speciesEn = false}}})]},proxy:true}])})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.shouldShow)?_c('div',{staticClass:\"level\",attrs:{\"id\":_vm.id}},[_c('div',{staticClass:\"level-item\"},[_c('div',{staticClass:\"field has-addons\",staticStyle:{\"width\":\"100%\"}},[_c('p',{staticClass:\"control\",staticStyle:{\"width\":\"100%\"}},[_c('b-autocomplete',{ref:\"autocomplete\",attrs:{\"type\":\"text\",\"placeholder\":_vm.label,\"data\":_vm.filteredCandidates,\"open-on-focus\":true,\"dropdown-position\":\"bottom\",\"max-height\":\"100%\",\"autocomplete\":\"off\",\"autocorrect\":\"off\",\"autocapitalize\":\"off\",\"spellcheck\":\"false\"},on:{\"focus\":function($event){return _vm.$emit('focus')},\"select\":_vm.handleSelect},scopedSlots:_vm._u([{key:\"default\",fn:function(props){return [_c('div',{staticClass:\"level\"},[_c('div',{staticClass:\"level-left\"},[_c('div',{staticClass:\"level-item\"},[_vm._v(_vm._s(props.option))])]),_c('div',{staticClass:\"level-right\"},[_c('div',{staticClass:\"level-item\"},_vm._l((_vm.getImageURLs(props.option)),function(url){return _c('img',{key:url,attrs:{\"src\":url}})}),0)])])]}}],null,false,3186801546),model:{value:(_vm.answer),callback:function ($$v) {_vm.answer=$$v},expression:\"answer\"}})],1),_c('p',{staticClass:\"control\"},[(_vm.answer)?_c('b-button',{on:{\"click\":_vm.clear}},[_c('i',{staticClass:\"fas fa-eraser\"})]):_vm._e()],1),_c('p',{staticClass:\"control\"},[(_vm.answer != _vm.truth)?_c('b-button',{on:{\"click\":_vm.reveal}},[_c('i',{staticClass:\"fas fa-eye\"})]):_vm._e()],1)])])]):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\n\nimport { debug, transformTaxonName } from \"./utils\";\n\nexport default Vue.extend({\n  props: {\n    initial: String,\n    shouldShow: Boolean,\n    id: String,\n    label: String,\n    filter: Function,\n    truth: String,\n    getImageURLs: Function,\n    handler: Function,\n  },\n  mounted() {\n    this.dismissMobileKeyboardOnDropdownScroll();\n  },\n  data() {\n    return {\n      answer: this.initial,\n    };\n  },\n  computed: {\n    filteredCandidates(): string[] {\n      debug([`${this.id}.filteredCandidates:`, JSON.stringify(this.answer)]);\n      return this.filter(this.answer);\n    },\n  },\n  watch: {\n    answer: {\n      sync: true,\n      handler: function (value: string): void {\n        debug([`${this.id}: watch: answer:`, JSON.stringify(value)]);\n        this.handler(value);\n        this.styleInputAccordingToAnswer();\n      },\n    } as any, // sync is private\n  },\n  methods: {\n    clear(): void {\n      debug([`GameFormField(${this.id}).clear`]);\n      this.answer = \"\";\n      this.handler(this.answer);\n    },\n\n    reveal(): void {\n      debug([\n        `GameFormField(${this.id}).reveal:`,\n        JSON.stringify(this.answer),\n        JSON.stringify(this.truth),\n      ]);\n      this.answer = this.truth;\n    },\n\n    handleSelect(answer: string) {\n      debug([\n        `GameFormField(${this.id}).handleSelect:`,\n        JSON.stringify(answer),\n      ]);\n      if (answer) {\n        this.answer = answer;\n        this.handler(this.answer);\n        this.$emit(\"select\");\n      }\n      this.styleInputAccordingToAnswer();\n    },\n\n    isCorrect(): boolean {\n      return transformTaxonName(this.truth) === transformTaxonName(this.answer);\n    },\n\n    styleInputAccordingToAnswer() {\n      const autocomplete = this.$refs.autocomplete as any;\n      const input = autocomplete?.$refs.input.$refs.input as HTMLElement;\n      debug([\n        `${this.id}.styleInputAccordingToAnswer:`,\n        `${input}`,\n        JSON.stringify(this.answer),\n        JSON.stringify(this.truth),\n      ]);\n      if (input) {\n        input.classList.remove(\"is-danger\");\n        input.classList.remove(\"is-success\");\n        if (this.answer && this.truth) {\n          input.classList.add(this.isCorrect() ? \"is-success\" : \"is-danger\");\n        }\n      }\n    },\n\n    dismissMobileKeyboardOnDropdownScroll(): void {\n      const autocomplete = this.$refs.autocomplete as any;\n      const input = autocomplete?.$refs.input.$refs.input as HTMLElement;\n      const dropdown = autocomplete?.$refs.dropdown as HTMLElement;\n      const dropdownContent = dropdown?.querySelector(\n        \".dropdown-content\"\n      ) as HTMLElement;\n      if (input && dropdownContent) {\n        dropdownContent.onscroll = () => {\n          input.blur();\n        };\n      } else {\n        debug([\n          \"Failed to obtain references to input and dropdown HTML elements.\",\n        ]);\n      }\n    },\n  },\n});\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??ref--13-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./GameFormField.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??ref--13-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./GameFormField.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./GameFormField.vue?vue&type=template&id=d90261de&scoped=true&\"\nimport script from \"./GameFormField.vue?vue&type=script&lang=ts&\"\nexport * from \"./GameFormField.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./GameFormField.vue?vue&type=style&index=0&id=d90261de&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"d90261de\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[(_vm.isModal)?_c('b-modal',{attrs:{\"active\":true,\"full-screen\":\"\"}},[_vm._t(\"form-field\")],2):_c('div',{staticClass:\"m-4\"},[_vm._t(\"form-field\")],2)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\nexport default Vue.extend({\n  props: { isModal: Boolean },\n});\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??ref--13-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./GameFormFieldContainer.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??ref--13-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./GameFormFieldContainer.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./GameFormFieldContainer.vue?vue&type=template&id=ca3675de&\"\nimport script from \"./GameFormFieldContainer.vue?vue&type=script&lang=ts&\"\nexport * from \"./GameFormFieldContainer.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport _ from \"lodash\";\nimport Vue, { PropType } from \"vue\";\n\nimport { debug, transformTaxonName } from \"./utils\";\nimport { EbirdSpecies } from \"./types\";\nimport { ebirdSpecies } from \"./ebird\";\nimport {\n  Answer,\n  ImageURLMaps,\n  NamesLanguage,\n  Recording,\n  Settings,\n} from \"./types\";\nimport GameFormField from \"./GameFormField.vue\";\nimport GameFormFieldContainer from \"./GameFormFieldContainer.vue\";\n\ntype GameFormFieldInstance = InstanceType<typeof GameFormField>;\n\nexport default Vue.extend({\n  components: { GameFormFieldContainer, GameFormField },\n  props: {\n    locationSpecies: Array as PropType<EbirdSpecies[]>,\n    recording: Object as PropType<Recording | null>,\n    image: String as PropType<string | null>,\n    imageURLMaps: Object as PropType<ImageURLMaps>,\n    settings: Object as PropType<Settings>,\n  },\n  data() {\n    const familyEn2Sci = new Map(\n      this.locationSpecies.map((sp) => [sp.familyComName, sp.familySciName])\n    );\n\n    const familySci2En = new Map(\n      this.locationSpecies.map((sp) => [sp.familySciName, sp.familyComName])\n    );\n\n    const genus2familySci = new Map(\n      this.locationSpecies.map((sp) => [\n        ebirdSpecies.getGenus(sp),\n        sp.familySciName,\n      ])\n    );\n\n    const speciesSci2genus = new Map(\n      this.locationSpecies.map((sp) => [sp.sciName, ebirdSpecies.getGenus(sp)])\n    );\n\n    const speciesSci2En = new Map(\n      this.locationSpecies.map((sp) => [sp.sciName, sp.comName])\n    );\n\n    const speciesEn2Sci = new Map(\n      this.locationSpecies.map((sp) => [sp.comName, sp.sciName])\n    );\n\n    return {\n      answer: {\n        familySci: \"\",\n        familyEn: \"\",\n        genus: \"\",\n        speciesSci: \"\",\n        speciesEn: \"\",\n      } as Answer,\n      familyEn2Sci,\n      familySci2En,\n      genus2familySci,\n      speciesSci2genus,\n      speciesSci2En,\n      speciesEn2Sci,\n      isModal: {\n        familySci: false,\n        familyEn: false,\n        genus: false,\n        speciesSci: false,\n        speciesEn: false,\n      },\n    };\n  },\n\n  computed: {\n    shouldShowScientificNames(): boolean {\n      return new Set([NamesLanguage.Scientific, NamesLanguage.Both]).has(\n        this.settings.names\n      );\n    },\n\n    shouldShowEnglishNames(): boolean {\n      return new Set([NamesLanguage.English, NamesLanguage.Both]).has(\n        this.settings.names\n      );\n    },\n\n    truth(): Answer {\n      debug([`GameForm.truth:`, JSON.stringify(this.recording)]);\n      if (this.recording) {\n        return {\n          familySci: this.recording.familySci,\n          familyEn: this.recording.familyEn,\n          genus: this.recording.genus,\n          speciesSci: this.recording.speciesSci,\n          speciesEn: this.recording.speciesEn,\n        };\n      } else {\n        return {\n          familySci: \"\",\n          familyEn: \"\",\n          genus: \"\",\n          speciesSci: \"\",\n          speciesEn: \"\",\n        };\n      }\n    },\n\n    familySciField(): GameFormFieldInstance {\n      return this.$refs.familySciField as GameFormFieldInstance;\n    },\n\n    familyEnField(): GameFormFieldInstance {\n      return this.$refs.familyEnField as GameFormFieldInstance;\n    },\n\n    genusField(): GameFormFieldInstance {\n      return this.$refs.genusField as GameFormFieldInstance;\n    },\n\n    speciesSciField(): GameFormFieldInstance {\n      return this.$refs.speciesSciField as GameFormFieldInstance;\n    },\n\n    speciesEnField(): GameFormFieldInstance {\n      return this.$refs.speciesEnField as GameFormFieldInstance;\n    },\n  },\n\n  methods: {\n    handleFamilySci(value: string): void {\n      debug([\"handleFamilySci:\", JSON.stringify(value)]);\n      this.answer.familySci = value;\n      const familyEn = this.familySci2En.get(value) || \"\";\n      this.familyEnField.answer = familyEn;\n      if (!familyEn) {\n        this.genusField.answer = \"\";\n      }\n    },\n\n    handleFamilyEn(value: string): void {\n      debug([\"handleFamilyEn:\", JSON.stringify(value)]);\n      this.answer.familyEn = value;\n      const familySci = this.familyEn2Sci.get(value) || \"\";\n      this.familySciField.answer = familySci;\n    },\n\n    handleGenus(value: string): void {\n      debug([\"handleGenus:\", JSON.stringify(value)]);\n      this.answer.genus = value;\n      const familySci = this.genus2familySci.get(value);\n      if (familySci) {\n        this.familySciField.answer = familySci;\n      } else {\n        this.speciesSciField.answer = \"\";\n      }\n    },\n\n    handleSpeciesSci(value: string): void {\n      debug([\"handleSpeciesSci:\", JSON.stringify(value)]);\n      this.answer.speciesSci = value;\n      // Autofill speciesEn\n      const speciesEn = this.speciesSci2En.get(value) || \"\";\n      (this.$refs.speciesEnField as any).answer = speciesEn;\n      // Autofill genus if the species is valid\n      const genus = this.speciesSci2genus.get(value);\n      if (genus) {\n        this.genusField.answer = genus;\n      }\n    },\n\n    handleSpeciesEn(value: string): void {\n      debug([\"handleSpeciesEn:\", JSON.stringify(value)]);\n      this.answer.speciesEn = value;\n      // Autofill speciesSci\n      const speciesSci = this.speciesEn2Sci.get(value) || \"\";\n      this.speciesSciField.answer = speciesSci;\n    },\n\n    getSpeciesSciImageURLs(answer: string): string[] {\n      if (this.settings.promptIncludesImages) {\n        return [];\n      }\n      return this._getImageURLs(\n        answer,\n        this.imageURLMaps.speciesSciName2images\n      );\n    },\n\n    getSpeciesEnImageURLs(answer: string): string[] {\n      if (this.settings.promptIncludesImages) {\n        return [];\n      }\n      return this._getImageURLs(\n        this.speciesEn2Sci.get(answer) || \"\",\n        this.imageURLMaps.speciesSciName2images\n      );\n    },\n\n    getGenusImageURLs(answer: string): string[] {\n      return this._getImageURLs(answer, this.imageURLMaps.genus2images);\n    },\n\n    getFamilySciImageURLs(answer: string): string[] {\n      return this._getImageURLs(answer, this.imageURLMaps.familySci2images);\n    },\n\n    getFamilyEnImageURLs(answer: string): string[] {\n      return this._getImageURLs(answer, this.imageURLMaps.familyEn2images);\n    },\n\n    _getImageURLs(\n      answer: string,\n      imageURLMap: Map<string, Set<string>>\n    ): string[] {\n      var images = imageURLMap.get(answer) || new Set();\n      if (this.settings.promptIncludesImages && this.image) {\n        images.delete(this.image);\n      }\n      return Array.from(images);\n    },\n\n    clear(): void {\n      this.familySciField.clear();\n      this.familyEnField.clear();\n      this.genusField.clear();\n      this.speciesSciField.clear();\n      this.speciesEnField.clear();\n    },\n\n    // filter*\n\n    filterFamilySci(answer: string): string[] {\n      return this._filter(\n        answer,\n        this.isFamilySciMatch,\n        ebirdSpecies.getFamilySci\n      );\n    },\n\n    filterFamilyEn(answer: string): string[] {\n      debug([\"filterFamilyEn:\", JSON.stringify(answer)]);\n      return this._filter(\n        answer,\n        this.isFamilyEnMatch,\n        ebirdSpecies.getFamilyEn\n      );\n    },\n\n    filterGenus(answer: string): string[] {\n      return this._filter(answer, this.isGenusMatch, ebirdSpecies.getGenus);\n    },\n\n    filterSpeciesSci(answer: string): string[] {\n      return this._filter(\n        answer,\n        this.isSpeciesSciMatch,\n        ebirdSpecies.getSpeciesSci\n      );\n    },\n\n    filterSpeciesEn(answer: string): string[] {\n      return this._filter(\n        answer,\n        this.isSpeciesEnMatch,\n        ebirdSpecies.getSpeciesEn\n      );\n    },\n\n    _filter(\n      answer: string,\n      matchFn: Function,\n      mapFn: (_: EbirdSpecies) => string\n    ): string[] {\n      return _.uniq(\n        this.locationSpecies.filter((sp) => matchFn(answer, sp)).map(mapFn)\n      );\n    },\n\n    // is*Match\n\n    isFamilySciMatch(answer: string, species: EbirdSpecies): boolean {\n      return _startsWith(species.familySciName, answer);\n    },\n\n    isFamilyEnMatch(answer: string, species: EbirdSpecies): boolean {\n      return _includes(species.familyComName, answer);\n    },\n\n    isGenusMatch(answer: string, species: EbirdSpecies): boolean {\n      if (\n        this.answer.familySci &&\n        !this.isFamilySciMatch(this.answer.familySci, species)\n      ) {\n        return false;\n      }\n      if (\n        this.answer.familyEn &&\n        !this.isFamilyEnMatch(this.answer.familyEn, species)\n      ) {\n        return false;\n      }\n      return _startsWith(ebirdSpecies.getGenus(species), answer);\n    },\n\n    isSpeciesSciMatch(answer: string, species: EbirdSpecies): boolean {\n      if (\n        this.answer.familySci &&\n        !this.isFamilySciMatch(this.answer.familySci, species)\n      ) {\n        return false;\n      }\n      if (this.answer.genus && !this.isGenusMatch(this.answer.genus, species)) {\n        return false;\n      }\n      return (\n        _startsWith(ebirdSpecies.getSpeciesSciSp(species), answer) ||\n        _startsWith(ebirdSpecies.getSpeciesSci(species), answer)\n      );\n    },\n\n    isSpeciesEnMatch(answer: string, species: EbirdSpecies): boolean {\n      if (\n        this.answer.familyEn &&\n        !this.isFamilyEnMatch(this.answer.familyEn, species)\n      ) {\n        return false;\n      }\n      if (this.answer.genus && !this.isGenusMatch(this.answer.genus, species)) {\n        return false;\n      }\n      return _includes(ebirdSpecies.getSpeciesEn(species), answer);\n    },\n  },\n});\n\nfunction _includes(truth: string, answer: string): boolean {\n  truth = transformTaxonName(truth);\n  answer = transformTaxonName(answer);\n  if (answer.length > 1) {\n    return truth.includes(answer);\n  } else {\n    return truth.startsWith(answer);\n  }\n}\n\nfunction _startsWith(truth: string, answer: string): boolean {\n  return transformTaxonName(truth).startsWith(transformTaxonName(answer));\n}\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??ref--13-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./GameForm.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??ref--13-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./GameForm.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./GameForm.vue?vue&type=template&id=7105fc83&scoped=true&\"\nimport script from \"./GameForm.vue?vue&type=script&lang=ts&\"\nexport * from \"./GameForm.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./GameForm.vue?vue&type=style&index=0&id=7105fc83&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7105fc83\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',[_c('p',[_c('a',{attrs:{\"href\":_vm.recordingSpeciesWikipediaURL(),\"target\":\"_blank\"}},[_vm._v(\" \"+_vm._s(_vm.recordingSpeciesSciName())+\" \")])]),(_vm.image && !_vm.settings.promptIncludesImages)?_c('img',{attrs:{\"src\":_vm.image}}):_vm._e(),(_vm.settings.promptIncludesRecording && _vm.recording)?_c('b-dropdown',{scopedSlots:_vm._u([{key:\"trigger\",fn:function(ref){\nvar active = ref.active;\nreturn [_c('b-button',{attrs:{\"label\":\"Recordings\",\"icon-right\":\"chevron-down\",\"icon-pack\":\"fas\"}})]}}],null,false,1570925922)},_vm._l((_vm.recordings.get(_vm.recording.sciName)),function(rec){return _c('b-dropdown-item',{key:rec.url},[_c('recording-component',{attrs:{\"recording\":rec,\"preload\":'none'}})],1)}),1):_vm._e(),(_vm.settings.promptIncludesRecording && _vm.recording)?_c('p'):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue, { PropType } from \"vue\";\nimport { NamesLanguage, Recording, Settings } from \"./types\";\nimport RecordingPlayer from \"./RecordingPlayer.vue\";\n\nexport default Vue.extend({\n  components: { RecordingPlayer },\n  props: {\n    image: String,\n    recording: Object as PropType<Recording>,\n    recordings: Map as PropType<Map<string, Recording[]>>,\n    settings: Object as PropType<Settings>,\n  },\n  methods: {\n    recordingSpeciesWikipediaURL(): string | null {\n      if (this.recording) {\n        return `https://en.wikipedia.org/w/index.php?title=${this.recording.speciesSci.replace(\n          \" \",\n          \"_\"\n        )}`;\n      } else {\n        return null;\n      }\n    },\n    recordingSpeciesSciName(): string | null {\n      if (this.recording) {\n        const speciesEn = this.recording.speciesEn;\n        if (this.settings.names == NamesLanguage.English) {\n          return speciesEn;\n        } else {\n          const speciesSci = this.recording.speciesSci;\n          if (this.settings.names == NamesLanguage.Scientific) {\n            return speciesSci;\n          } else {\n            return `${speciesSci} (${speciesEn})`;\n          }\n        }\n      } else {\n        return null;\n      }\n    },\n  },\n});\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??ref--13-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./RevealArea.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??ref--13-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./RevealArea.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./RevealArea.vue?vue&type=template&id=3598205a&\"\nimport script from \"./RevealArea.vue?vue&type=script&lang=ts&\"\nexport * from \"./RevealArea.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',[_c('h1',{staticStyle:{\"font-weight\":\"bold\"}},[_vm._v(\" \"+_vm._s(_vm.ebirdHotspots.length > 0 ? _vm.ebirdHotspots.map(function (h) { return h.locName; }).join(\", \") : _vm.ebirdLocIds.join(\", \"))+\" \")]),_c('ul',[_c('li',[_vm._v(_vm._s(_vm.locationSpecies.length)+\" species total\")]),_c('li',[_vm._v(_vm._s(_vm.challengeRecordings.length)+\" species in current challenge\")]),_c('li',[_c('div',{staticClass:\"buttons\"},[_c('b-button',{staticClass:\"light\",on:{\"click\":function($event){_vm.isFamilyModalActive = true}}},[_c('i',{staticClass:\"fas fa-cog\"}),_vm._v(\" Families \")])],1),_c('b-modal',{attrs:{\"full-screen\":\"\"},model:{value:(_vm.isFamilyModalActive),callback:function ($$v) {_vm.isFamilyModalActive=$$v},expression:\"isFamilyModalActive\"}},[_c('section',{staticClass:\"section\"},[_c('family-selector',{attrs:{\"challengeFamilies\":_vm.challengeFamilies}})],1)])],1)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ul',_vm._l((_vm.challengeFamilies.entries()),function(ref){\nvar family = ref[0];\nvar data = ref[1];\nreturn _c('li',{key:family},[_c('b-checkbox',{attrs:{\"value\":data.selected},on:{\"input\":function (val) { return _vm.selectFamily(family, val); }}}),_vm._v(\" \"+_vm._s(family)+\" (\"+_vm._s(data.n)+\") \")],1)}),0)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\nimport eventBus from \"./event-bus\";\nimport Vue, { PropType } from \"vue\";\nimport { ChallengeFamily } from \"./types\";\nexport default Vue.extend({\n  props: { challengeFamilies: Map as PropType<Map<string, ChallengeFamily>> },\n  methods: {\n    selectFamily(family: string, val: boolean): void {\n      eventBus.$emit(\"family:select\", family, val);\n    },\n  },\n});\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??ref--13-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./FamilySelector.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??ref--13-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./FamilySelector.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./FamilySelector.vue?vue&type=template&id=2aa0c586&\"\nimport script from \"./FamilySelector.vue?vue&type=script&lang=ts&\"\nexport * from \"./FamilySelector.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue, { PropType } from \"vue\";\nimport { ChallengeFamily, EbirdHotspot, EbirdSpecies, Recording } from \"./types\";\nimport FamilySelector from \"./FamilySelector.vue\";\n\nexport default Vue.extend({\n  components: { FamilySelector },\n  props: {\n    ebirdLocIds: Array as PropType<string[]>,\n    ebirdHotspots: Array as PropType<EbirdHotspot[]>,\n    locationSpecies: Array as PropType<EbirdSpecies[]>,\n    challengeRecordings: Array as PropType<Recording[]>,\n    challengeFamilies: Map as PropType<Map<string, ChallengeFamily>>,\n  },\n  data() {\n    return { isFamilyModalActive: false };\n  },\n});\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??ref--13-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChallengeDescription.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??ref--13-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChallengeDescription.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./ChallengeDescription.vue?vue&type=template&id=4ce9a65c&\"\nimport script from \"./ChallengeDescription.vue?vue&type=script&lang=ts&\"\nexport * from \"./ChallengeDescription.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"section\"},[(!_vm.recording)?_c('nav',{staticClass:\"level\"},[_c('div',{staticClass:\"level-item\"},[_c('div',{staticClass:\"field\"},[_c('p',{staticClass:\"control\"},[_c('b-button',{staticClass:\"light is-large\",on:{\"click\":_vm.setNextRecording}},[_c('i',{staticClass:\"fas fa-play\"})])],1)])])]):_c('ul',{staticClass:\"box has-text-centered\"},[_c('li',[_c('nav',{staticClass:\"level\"},[_c('div',{staticClass:\"level-item\"},[_c('div',{staticClass:\"field\"},[_c('p',{staticClass:\"control\"},[_c('b-button',{staticClass:\"light\",on:{\"click\":_vm.setNextRecording}},[_c('i',{staticClass:\"fas fa-step-forward\"})])],1)])])])]),_c('li',[_c('nav',{staticClass:\"level\"},[_c('div',{staticClass:\"level-item\"},[_c('div',{staticClass:\"field\"},[_c('p',{staticClass:\"control\"},[_c('recording-player',{attrs:{\"recording\":_vm.recording}})],1)])]),(_vm.image && _vm.settings.promptIncludesImages)?_c('p',{staticClass:\"level-item\"},[_c('img',{attrs:{\"src\":_vm.image}})]):_vm._e()])]),_c('li',[_vm._v(_vm._s(_vm.recording.raw.loc)+\", \"+_vm._s(_vm.recording.raw.cnt))]),(_vm.recording.raw.also.length[0])?_c('li',[_vm._v(\" Also: \"),_c('ul',_vm._l((_vm.recording.raw.also),function(sp){return _c('li',{key:sp},[_vm._v(_vm._s(sp))])}),0)]):_vm._e()])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue, { PropType } from \"vue\";\nimport { Recording, Settings } from \"./types\";\n\nimport RecordingPlayer from \"./RecordingPlayer.vue\";\n\nexport default Vue.extend({\n  components: { RecordingPlayer },\n  props: {\n    image: String,\n    recording: Object as PropType<Recording | null>,\n    setNextRecording: Function,\n    settings: Object as PropType<Settings>,\n  },\n});\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??ref--13-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChallengeControls.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??ref--13-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChallengeControls.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./ChallengeControls.vue?vue&type=template&id=0bb20a30&\"\nimport script from \"./ChallengeControls.vue?vue&type=script&lang=ts&\"\nexport * from \"./ChallengeControls.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport _ from \"lodash\";\nimport Vue, { PropType } from \"vue\";\n\nimport {\n  fetchEbirdHotspots,\n  ebirdSpecies,\n  fetchLocationSpecies,\n  fetchRecentObservations,\n  fetchSpeciesImages,\n  fetchEbirdHotspotsByLatLng,\n} from \"./ebird\";\nimport { fetchAllRecordings, isSong } from \"./xeno-canto\";\nimport { isDefaultSelectedFamily } from \"./birds\";\nimport RecordingPlayer from \"./RecordingPlayer.vue\";\nimport {\n  LocationRequest,\n  ChallengeFamily,\n  EbirdHotspot,\n  EbirdObservation,\n  EbirdSpecies,\n  ImageURLMaps,\n  Recording,\n  Settings,\n  SpeciesImages,\n  XenoCantoRecording,\n} from \"./types\";\nimport GameForm from \"./GameForm.vue\";\nimport eventBus from \"./event-bus\";\nimport RevealArea from \"./RevealArea.vue\";\nimport ChallengeDescription from \"./ChallengeDescription.vue\";\nimport ChallengeControls from \"./ChallengeControls.vue\";\n\nexport default Vue.extend({\n  name: \"Home\",\n  components: {\n    RecordingPlayer,\n    GameForm,\n    RevealArea,\n    ChallengeDescription,\n    ChallengeControls,\n  },\n  props: {\n    locationRequest: Object as PropType<LocationRequest>,\n    settings: Object as PropType<Settings>,\n  },\n\n  data() {\n    return {\n      ebirdLocIds: [] as string[],\n      ebirdHotspots: [] as EbirdHotspot[],\n      locationSpecies: [] as EbirdSpecies[],\n      speciesCode2SciName: new Map([]) as Map<string, string>,\n      species2familySci: new Map([]) as Map<string, string>,\n      species2familyEn: new Map([]) as Map<string, string>,\n      commonSpecies: new Set([]) as Set<string>,\n      recentObservations: [] as EbirdObservation[],\n      challengeFamilies: new Map([]) as Map<string, ChallengeFamily>,\n      selectedFamilies: new Set([]) as Set<string>,\n      speciesImages: [] as SpeciesImages[],\n      imageURLMaps: makeImageURLMaps([], []),\n      recordings: new Map([]) as Map<string, Recording[]>, // sciName\n      challengeRecordings: [] as Recording[],\n      challengeRecordingsIterator: makeRecordingsIterator(\n        []\n      ) as Iterator<Recording>,\n      recording: null as Recording | null,\n      haveLocationData: false,\n      challengeActive: false,\n      image: \"\",\n    };\n  },\n\n  created: async function () {\n    await this.fetchLocationData();\n    this.haveLocationData = true;\n    this.imageURLMaps = makeImageURLMaps(\n      this.speciesImages,\n      this.locationSpecies\n    );\n    this.speciesCode2SciName = new Map(\n      this.locationSpecies.map((sp) => [sp.speciesCode, sp.sciName])\n    );\n    this.species2familySci = new Map(\n      this.locationSpecies.map((sp) => [sp.sciName, sp.familySciName])\n    );\n    this.species2familyEn = new Map(\n      this.locationSpecies.map((sp) => [sp.sciName, sp.familyComName])\n    );\n    this.commonSpecies = new Set(\n      this.recentObservations\n        .map((obs) => this.speciesCode2SciName.get(obs.speciesCode))\n        .filter(Boolean) as any\n    );\n    this.challengeFamilies = makeChallengeFamilies(this.locationSpecies);\n    this.selectedFamilies = new Set(\n      Array.from(this.challengeFamilies.entries())\n        .filter(([_, { selected }]) => selected)\n        .map(([family, _]) => family)\n    );\n    this.setChallengeRecordings();\n  },\n\n  mounted: function () {\n    eventBus.$on(\"family:select\", this.handleFamilySelection);\n    eventBus.$on(\n      \"ready:challenge-recording\",\n      () => (this.challengeActive = true)\n    );\n  },\n\n  watch: {\n    settings: {\n      deep: true,\n      handler: function (_newVal: Settings) {\n        this.setChallengeRecordings();\n      },\n    },\n    challengeFamilies: {\n      deep: true,\n      handler: function (_newVal: Map<string, ChallengeFamily>) {\n        this.setChallengeRecordings();\n      },\n    },\n  },\n\n  computed: {\n    isLoading(): Boolean {\n      return !this.haveLocationData;\n    },\n  },\n\n  methods: {\n    setChallengeRecordings(): void {\n      this.challengeRecordings = this.makeChallengeRecordings(\n        this.locationSpecies\n      );\n      this.challengeRecordingsIterator = makeRecordingsIterator(\n        this.challengeRecordings\n      );\n    },\n\n    handleFamilySelection(family: string, selected: boolean): void {\n      var challengeFamily = this.challengeFamilies.get(family);\n      if (challengeFamily) {\n        challengeFamily.selected = selected;\n      }\n    },\n\n    async fetchLocationData(): Promise<void> {\n      try {\n        // Determine locations from request parameters\n        if (this.locationRequest.ebirdLocId) {\n          this.ebirdLocIds = [this.locationRequest.ebirdLocId];\n        } else if (this.locationRequest.latlng) {\n          this.ebirdHotspots = await fetchEbirdHotspotsByLatLng(\n            this.locationRequest.latlng\n          );\n          this.ebirdLocIds = this.ebirdHotspots.map((h) => h.locId);\n        } else {\n          throw \"Expected ebird ebirdLocId or coordinates\";\n        }\n        // In parallel: given locations, fetch combined species list, hotspot info, and recent observations.\n        [\n          this.locationSpecies,\n          this.ebirdHotspots,\n          this.recentObservations,\n        ] = await Promise.all([\n          fetchLocationSpecies(this.ebirdLocIds),\n          this.ebirdHotspots.length > 0\n            ? Promise.resolve(this.ebirdHotspots)\n            : fetchEbirdHotspots(this.ebirdLocIds),\n          fetchRecentObservations(this.ebirdLocIds),\n        ]);\n        // In parallel: given species list, fetch recording and image URLs\n        [this.recordings, this.speciesImages] = await Promise.all([\n          fetchAllRecordings(this.locationSpecies, this.ebirdHotspots),\n          fetchSpeciesImages(this.locationSpecies),\n        ]);\n        console.log(`Fetched data for ${this.ebirdLocIds.length} locIds:`);\n        console.log(`hotspots: ${this.ebirdHotspots.length}`);\n        console.log(`species: ${this.locationSpecies.length}`);\n        console.log(`images: ${this.speciesImages.length}`);\n        console.log(`recordings: ${this.recordings.size}`);\n        console.log(`recent observations: ${this.recentObservations.length}`);\n      } catch (err) {\n        console.log(\"Error fetching location species and recordings: \", err);\n      }\n    },\n\n    makeChallengeRecordings: function (species: EbirdSpecies[]): Recording[] {\n      var challengeRecordings = [];\n      for (let sp of _.shuffle(species)) {\n        const recordings = this.recordings.get(sp.sciName) || [];\n        // TODO: type\n        for (let recording of this.makeSpeciesRecordingsIterator(\n          recordings\n        ) as any) {\n          challengeRecordings.push(recording);\n          break;\n        }\n      }\n      return challengeRecordings;\n    },\n\n    makeSpeciesRecordingsIterator: function* (\n      recordings: Recording[]\n    ): Iterator<Recording> {\n      for (let recording of _.shuffle(recordings)) {\n        if (this.recordingMatchesFilters(recording.raw, this.settings)) {\n          yield recording;\n        }\n      }\n    },\n\n    recordingMatchesFilters(\n      xcRec: XenoCantoRecording,\n      settings: Settings\n    ): boolean {\n      if (settings.songsOnly && !isSong(xcRec.type)) {\n        return false;\n      }\n      const species = `${xcRec.gen} ${xcRec.sp}`;\n      if (settings.commonSpeciesOnly && !this.commonSpecies.has(species)) {\n        return false;\n      }\n      if (\n        !this.selectedFamilies.has(this.species2familyEn.get(species) || \"\")\n      ) {\n        return false;\n      }\n      return true;\n    },\n\n    setNextRecording(): void {\n      (this.$refs.gameForm as any)?.clear();\n      this.image = \"\";\n      const rec = this.challengeRecordingsIterator.next();\n      if (!rec.done) {\n        this.recording = rec.value;\n        let images = this.imageURLMaps.speciesSciName2images.get(\n          this.recording.speciesSci\n        );\n        if (images) {\n          let image = images.values().next();\n          if (!image.done) {\n            this.image = image.value;\n          } else {\n            alert(\"No images for species!\");\n          }\n        }\n      } else {\n        alert(\"No more recordings!\");\n      }\n    },\n  },\n});\n\nfunction makeChallengeFamilies(\n  challengeSpecies: EbirdSpecies[]\n): Map<string, ChallengeFamily> {\n  const family2order = new Map(\n    challengeSpecies.map((sp) => [sp.familyComName, sp.order])\n  );\n\n  return new Map(\n    Object.entries(_.groupBy(challengeSpecies, (sp) => sp.familyComName)).map(\n      ([family, spp]) => [\n        family,\n        {\n          n: spp.length,\n          selected: isDefaultSelectedFamily(family, family2order),\n        },\n      ]\n    )\n  );\n}\n\nfunction makeImageURLMaps(\n  speciesImages: SpeciesImages[],\n  locationSpecies: EbirdSpecies[]\n): ImageURLMaps {\n  var speciesSciName2images: Map<string, Set<string>> = new Map();\n  var genus2images: Map<string, Set<string>> = new Map();\n  var familySci2images: Map<string, Set<string>> = new Map();\n  var familyEn2images: Map<string, Set<string>> = new Map();\n\n  const species2images = new Map(\n    speciesImages.map((obj) => [obj.species, obj.urls])\n  );\n\n  for (let sp of locationSpecies) {\n    let genus = ebirdSpecies.getGenus(sp);\n    let speciesSci = ebirdSpecies.getSpeciesSci(sp);\n    let haveSeenGenus = true;\n    let images = species2images.get(sp.sciName) || [];\n    if (images[0]) {\n      speciesSciName2images.set(speciesSci, new Set(images));\n\n      if (!genus2images.has(genus)) {\n        genus2images.set(genus, new Set());\n        haveSeenGenus = false;\n      }\n      genus2images.get(genus)?.add(images[0]);\n      if (!haveSeenGenus) {\n        let familySci = ebirdSpecies.getFamilySci(sp);\n        let familyEn = ebirdSpecies.getFamilyEn(sp);\n        if (!familySci2images.has(familySci)) {\n          familySci2images.set(familySci, new Set());\n        }\n        if (!familyEn2images.has(familyEn)) {\n          familyEn2images.set(familyEn, new Set());\n        }\n        familySci2images.get(familySci)?.add(images[0]);\n        familyEn2images.get(familyEn)?.add(images[0]);\n      }\n    }\n  }\n\n  return {\n    speciesSciName2images,\n    genus2images,\n    familySci2images,\n    familyEn2images,\n  };\n}\n\nfunction* makeRecordingsIterator(recordings: Recording[]): Iterator<Recording> {\n  for (let rec of recordings) {\n    yield rec;\n  }\n}\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??ref--13-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./Game.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??ref--13-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./Game.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Game.vue?vue&type=template&id=0680869b&\"\nimport script from \"./Game.vue?vue&type=script&lang=ts&\"\nexport * from \"./Game.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\nimport Vue, { PropType } from \"vue\";\n\nimport eventBus from \"./event-bus\";\nimport ControlPanel from \"./ControlPanel.vue\";\nimport Game from \"./Game.vue\";\nimport { LocationRequest, NamesLanguage, Settings } from \"./types\";\n\nexport default Vue.extend({\n  name: \"GameRoot\",\n  props: { locationRequest: Object as PropType<LocationRequest> },\n  components: { ControlPanel, Game },\n  data() {\n    return {\n      settings: {\n        names: NamesLanguage.Both,\n        promptIncludesImages: false,\n        promptIncludesRecording: true,\n        commonSpeciesOnly: false,\n        songsOnly: true,\n        useFieldModals: false,\n      } as Settings,\n      controlPanelOpen: false,\n    };\n  },\n  mounted: function (): void {\n    eventBus.$on(\"settings:change:names\", (newVal: NamesLanguage) => {\n      this.settings.names = newVal;\n    });\n    eventBus.$on(\"settings:change:commonSpeciesOnly\", (newVal: boolean) => {\n      this.settings.commonSpeciesOnly = newVal;\n    });\n    eventBus.$on(\"settings:change:songsOnly\", (newVal: boolean) => {\n      this.settings.songsOnly = newVal;\n    });\n    eventBus.$on(\"settings:change:promptIncludesImages\", (newVal: boolean) => {\n      this.settings.promptIncludesImages = newVal;\n    });\n    eventBus.$on(\n      \"settings:change:promptIncludesRecording\",\n      (newVal: boolean) => {\n        this.settings.promptIncludesRecording = newVal;\n      }\n    );\n    eventBus.$on(\"settings:change:useFieldModals\", (newVal: boolean) => {\n      this.settings.useFieldModals = newVal;\n    });\n  },\n});\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??ref--13-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./GameRoot.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??ref--13-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./GameRoot.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./GameRoot.vue?vue&type=template&id=10984db8&\"\nimport script from \"./GameRoot.vue?vue&type=script&lang=ts&\"\nexport * from \"./GameRoot.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from \"vue\";\nimport VueRouter from \"vue-router\";\n\nVue.use(VueRouter);\n\nimport _ from \"lodash\";\nimport Buefy from \"buefy\";\nimport \"buefy/dist/buefy.css\";\nimport \"../node_modules/@fortawesome/fontawesome-free/js/all.js\";\n\nimport { LocationRequest } from \"./types\";\nimport App from \"./App.vue\";\nimport Root from \"./Root.vue\";\nimport GameRoot from \"./GameRoot.vue\";\n\nVue.config.productionTip = false;\nVue.use(Buefy, {\n  defaultIconPack: \"fas\",\n  defaultContainerElement: \"#content\"\n});\n\nconst routes = [\n  { path: \"/\", component: Root, name: \"trogon-root\" },\n  {\n    path: \"/challenge/\",\n    component: GameRoot,\n    props: (route: any) => ({\n      locationRequest: {\n        ebirdLocId: route.query.location,\n        latlng: route.query.coords\n          ? (_.zipObject([\"lat\", \"lng\"], route.query.coords.split(\",\")) as any)\n          : null\n      } as LocationRequest\n    }),\n    name: \"trogon-game-root\"\n  },\n];\n\nconst router = new VueRouter({ mode: \"history\", routes });\n\nnew Vue({\n  router,\n  render: h => h(App)\n}).$mount(\"#app\");\n","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./ControlPanel.vue?vue&type=style&index=0&id=7eb4310e&scoped=true&lang=css&\""],"sourceRoot":""}